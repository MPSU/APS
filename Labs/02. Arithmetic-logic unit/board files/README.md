# Проверка работы арифметико-логического устройства в ПЛИС

После того, как вы создали проверили на моделировании АЛУ,
вам необходимо проверить его работу на прототипе в ПЛИС.

Инструкция по реализации прототипа описана [здесь](../../../Vivado%20Basics/How%20to%20program%20an%20fpga%20board.md).

На _рис. 1_ представлена схема прототипа в ПЛИС.

![../../../.pic/Labs/board%20files/nexys_alu_structure.drawio.svg](../../../.pic/Labs/board%20files/nexys_alu_structure.drawio.svg)

_Рисунок 1. Структурная схема модуля `nexys_alu`, где блоки `SE` &mdash;
[знакорасширители](https://ru.wikipedia.org/wiki/Дополнительный_код#Расширение_знака)._

Модуль `nexys_alu` позволяет подавать данные с переключателей на входы `a_i`, `b_i`, `alu_op_i`,
а также задавать знак операндов/результата с помощью все тех же переключателей.

Переключатели `sw[15:11]` относятся к
операнду `a_i`, переключатели `sw[10:6]` относятся к операнду `b_i`, `sw[5]` &mdash; `sign_on`
(назначение этого сигнала подробнее описано дальше по тексту),
`sw[4:0]` &mdash; относятся к `alu_op_i`.

Сигнал `sign_on` &mdash; определяет интерпретацию (знаковый/беззнаковый) операндов `a_i`, `b_i`
и результата `result_o`:
Если сигнал принимает значение единицы, то устанавливается
знаковая интерпретация: оба операнда знакорасширяются с пяти бит до тридцати двух,
а семисегментные индикаторы выводят числа в знаковой интерпретации в зависимости от значения
старшего бита операнда/результата. А если сигнал принимает значение нуля, то устанавливается
беззнаковая интерпретация: старшие биты обоих операндов дополняются нулями,
а семисегментные индикаторы выводят числа в беззнаковой интерпретации.

Таким образом, область допустимых значений операндов:
-   При знаковой интерпретации: `[-16:15]`
-   При беззнаковой интерпретации: `[0:31]`

Нужно помнить, что на семисегментных индикаторах числа отображаются в
**десятичной** системе счисления.

Блок результата отображает знак и 3 наименее значимые
**цифры** (разряды сотен, десятков, единиц) результата с учетом его интерпретации как
знаковое/беззнаковое число. Например, результат операции вычитания `0 - 1` при знаковой
интерпретации отобразится как `-1` на семисегментых индикаторах, а при беззнаковой интерпретации
как `295` (3 наименее значимые цифры числа `4,294,967,295`).

Светодиоды, расположенные над переключателями, отображают 15 бит результата и флаг.
То есть `led[15]` соединен с `flag_o` сигналом `alu`, а `led[14:0]` - с `result_o[14:0]`.

На рис. 2 показан пример сложения 0x48 + 0x18 = 0x60 при нулевом входном переносе. (нулевом, т.к. не нажата кнопка BTND)

![../../../.pic/Labs/board%20files/nexys_alu.png](../../../.pic/Labs/board%20files/nexys_alu.png)

Попробуйте выставить на переключателях различные `alu_op` такие, как сложение, вычитание, сдвиг и
сравнения, посмотрите различие между знаковыми/беззнаковыми операциями, убедитесь,
что все работает исправно и сдавайте работу.
